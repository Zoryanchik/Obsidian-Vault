## **Task 5: Queries Without JOIN (Detailed Explanation)**

**Schema Recap:**

- **EMPLOYEE(NAME, SSN, BDATE, ADDRESS, SALARY, SUPERSSN, DNUMBER)**
    
- **DEPARTMENT(DNAME, DNUMBER, SSN, MGRSTARTDATE)**
    
- **DEPT_LOCATIONS(DNUMBER, DLOCATION)**
    
- **PROJECT(PNAME, PNUMBER, PLOCATION, DNUMBER)**
    
- **WORKSON(SSN, PNUMBER, HOURS)**
    
- **DEPENDENT(SSN, DEPENDENT_NAME, SEX, BDATE, RELATIONSHIP)**

![[Pasted image 20251116012416.png]]![[Pasted image 20251116012446.png]]
![[Pasted image 20251116012507.png]]![[Pasted image 20251116012741.png]]![[Pasted image 20251116012801.png]]This query is a classic example of **relational division**, and its logic can be tricky.

In plain English, this query is asking: **"Find the names of employees who work on _all_ projects."**

It uses a double-negative (`NOT EXISTS ... WHERE NOT EXISTS ...`) to achieve this.

---

### ðŸ§  Logical Breakdown

Let's break it down from the inside out, imagining we are checking one employee at a time (let's call her "Employee X").

**1. The Innermost Query (Block 3)**

SQL

```
SELECT * FROM WORKSON W
WHERE W.SSN = E.SSN AND W.PNUMBER = P.PNUMBER
```

- `E.SSN` is Employee X's SSN (from the outer query).
    
- `P.PNUMBER` is a project's number (from the middle query).
    
- **Purpose:** This query asks: "Does Employee X work on this specific Project P?" It returns a row if they do, and nothing if they don't.
    

**2. The Middle Query (Block 2)**

SQL

```
SELECT * FROM PROJECT P
WHERE NOT EXISTS (
    -- ... Block 3 ...
)
```

- This query loops through **all** projects in the `PROJECT` table.
    
- The `WHERE NOT EXISTS (Block 3)` clause is the key. It translates to: "Find projects where it is **not** true that 'Employee X works on this project'."
    
- **Purpose:** This subquery generates a list of **all projects that Employee X does _not_ work on.**
    

**3. The Outermost Query (Block 1)**

SQL

```
SELECT NAME 
FROM EMPLOYEE E
WHERE NOT EXISTS (
    -- ... Block 2 ...
)
```

- This query loops through every employee (`E`).
    
- The `WHERE NOT EXISTS (Block 2)` clause checks the list generated by the middle query.
    
- **Purpose:** It asks: "Is it true that the list of 'projects Employee X _does not_ work on' is **empty**?"
![[Pasted image 20251116013402.png]]![[Pasted image 20251116013414.png]]![[Pasted image 20251116013533.png]]